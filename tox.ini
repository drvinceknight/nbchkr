[tox]
isolated_build = True
envlist = py310, py311

[gh-actions]
python =
    3.8: py38
    3.9: py39
    3.10: py310
    3.11: py311

[flake8]
per-file-ignores =
    setup.py: F821
    docs/_build/*: ALL
    docs/conf.py: E402
    **/__init__.py: F401 F403
ignore =
    E203
    E501
    W291
    W503
docstring_style=numpy

[testenv]
deps =
    black[jupyter]
    mypy
    interrogate
    flake8
    darglint
    pytest-cov
    pytest-randomly
    pytest-sugar
commands =
    python -m black --check .
    python -m interrogate -e setup.py -e tests/ -M -i -v -f 100 .
    python -m mypy src/ --pretty
    python -m pytest -v --cov=nbchkr --cov-fail-under=100 --flake8 --doctest-glob='*.rst' --ignore=docs/conf.py
    python -m coverage report -m
    python -m flake8 src/
    python -m flake8 tests/
